{% extends "base.html" %}

{% block title %}Edit Rack{% endblock %}

{% block content %}
<div class="row">
    <div class="col-12">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <div>
                <h1><i class="bi bi-pencil"></i> Edit Rack</h1>
                <p class="text-muted">Update rack or bench information</p>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-lg-8 mx-auto">
        <div class="card">
            <div class="card-header bg-primary text-white">
                <h5 class="mb-0"><i class="bi bi-server"></i> Rack Information</h5>
            </div>
            <div class="card-body">
                <form method="POST">
                    <div class="row">
                        <div class="col-md-8 mb-3">
                            <label for="name" class="form-label">
                                Rack Name <span class="text-danger">*</span>
                            </label>
                            <input type="text" class="form-control" id="name" name="name"
                                   value="{{ rack.name }}" required
                                   placeholder="e.g., B04-Rack or TestBench-5">
                            <div class="form-text">Include "-Rack" or "-Bench" suffix to differentiate types</div>
                        </div>
                        
                        <div class="col-md-4 mb-3">
                            <label for="rack_type" class="form-label">
                                Type <span class="text-danger">*</span>
                            </label>
                            <select class="form-select" id="rack_type" name="rack_type" required>
                                <option value="rack" {% if rack.rack_type == 'rack' %}selected{% endif %}>Rack</option>
                                <option value="bench" {% if rack.rack_type == 'bench' %}selected{% endif %}>Bench</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="mb-3">
                        <label for="location" class="form-label">
                            Location <span class="text-danger">*</span>
                        </label>
                        <input type="text" class="form-control" id="location" name="location"
                               value="{{ rack.location }}" required
                               placeholder="e.g., Redmond - Building 50">
                        <div class="form-text">Physical location of this rack or bench</div>
                    </div>
                    
                    <div class="mb-3">
                        <label for="description" class="form-label">Description</label>
                        <textarea class="form-control" id="description" name="description" rows="3"
                                  placeholder="Optional additional information">{{ rack.description or '' }}</textarea>
                    </div>
                    
                    <hr class="my-4">
                    
                    <h6 class="mb-3"><i class="bi bi-hdd-network"></i> RSCM IP Addresses</h6>
                    
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="rscm_upper" class="form-label">
                                Upper RSCM IP
                            </label>
                            <input type="text" class="form-control" id="rscm_upper" name="rscm_upper"
                                   value="{{ rscm_upper or '' }}"
                                   placeholder="e.g., 10.0.0.1"
                                   pattern="^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$">
                            <div class="form-text">Will be associated with all servers in this rack</div>
                        </div>
                        
                        <div class="col-md-6 mb-3">
                            <label for="rscm_lower" class="form-label">
                                Lower RSCM IP
                            </label>
                            <input type="text" class="form-control" id="rscm_lower" name="rscm_lower"
                                   value="{{ rscm_lower or '' }}"
                                   placeholder="e.g., 10.0.0.2"
                                   pattern="^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$">
                            <div class="form-text">Optional secondary RSCM</div>
                        </div>
                    </div>
                    
                    <div class="mb-4">
                        <div class="card bg-light">
                            <div class="card-body">
                                <h6 class="card-title"><i class="bi bi-info-circle"></i> Rack Details</h6>
                                <dl class="row mb-0">
                                    <dt class="col-sm-3">Created:</dt>
                                    <dd class="col-sm-9">{{ rack.created_at[:19] if rack.created_at else 'Unknown' }}</dd>
                                    <dt class="col-sm-3">Rack ID:</dt>
                                    <dd class="col-sm-9">{{ rack.id }}</dd>
                                </dl>
                            </div>
                        </div>
                    </div>
                    
                    <div class="d-flex justify-content-between">
                        <a href="{{ url_for('racks') }}" class="btn btn-secondary">
                            <i class="bi bi-x"></i> Cancel
                        </a>
                        <button type="submit" class="btn btn-primary">
                            <i class="bi bi-save"></i> Update Rack
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}
